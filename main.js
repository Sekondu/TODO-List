(()=>{"use strict";let e=new class{constructor(){this.main_container=document.querySelector(".main_container"),this.dashboard=document.querySelector(".dashboard"),this.dashboard_header=document.querySelector(".dashboard-header"),this.header_btn=this.dashboard_header.querySelector(".btn"),this.dashboard_buttons=document.querySelector(".dashboard-buttons")}dashboard_collapse(){this.main_container.classList.remove("dashboard_expand"),this.main_container.classList.add("dashboard_collapse"),this.dashboard_header.classList.add("collapsed"),this.header_btn.textContent="▶️",this.dashboard.removeChild(this.dashboard_buttons)}dashboard_expand(){this.main_container.classList.remove("dashboard_collapse"),this.dashboard_header.classList.remove("collapsed"),this.header_btn.textContent="◀️",this.dashboard.appendChild(this.dashboard_buttons)}},t=new class{constructor(){this.add_Task_default,this.body=document.querySelector("body"),this.default_project,this.projects=[],this.tasks_set=[]}set_Default_Project(e){this.default_project=e}task_builder(e,t,o){this.add_Task_default=o.querySelector(".add"),this.set_Default_Project(o),this.default_project.removeChild(this.add_Task_default),this.form=document.createElement("form"),this.form_submit=document.createElement("button"),this.priority_label=document.createElement("label"),this.form_priority=document.createElement("select"),this.form_low_prio=document.createElement("option"),this.form_medium_prio=document.createElement("option"),this.form_high_prio=document.createElement("option"),this.form_date_input=document.createElement("input"),this.form_date_label=document.createElement("label"),this.name_input=document.createElement("input"),this.name_label=document.createElement("label"),this.desc_label=document.createElement("label"),this.desc_input=document.createElement("input"),this.form_cancel=document.createElement("button");let i=document.createElement("div");this.form_cancel.style="grid-area:cancel;color:#d7c49eff;justify-self:end;margin-right:20px;width:50px;aspect-ratio:1;background-color:transparent;border:none;font-size:20px;",this.form_submit.style="grid-area:submit;color:#d7c49eff;justify-self:end;margin-right:20px;background-color:transparent;border:none;align-self:center;font-size:20px;padding-bottom:10px;",this.name_input.style="color:#d7c49eff;background-color:transparent;border-radius:5px;grid-area:name;font-size:15px;height:25px;",this.name_label.style="grid-area:name_label;align-self:end;font-size:20px;height:30px;",this.form_date_input.style="grid-area:date;background-color:transparent;color:#d7c49eff;font-size:15px;height:25px;border-radius:5px;",this.form_date_label.style="grid-area:date_label;align-self:end;font-size:20px;",this.desc_input.style="grid-area:desc;background-color:transparent;color:#d7c49eff;font-size:15px;height:25px;border-radius:5px",this.desc_label.style="grid-area:desc_label;font-size:20px;",this.form_priority.style="background-color:transparent;grid-area:priority;color:#d7c49eff",this.priority_label.style="grid-area:priority_label;background-color:transparent;color:#d7c49eff;font-size:20px;align-self:end;",this.form_submit.type="submit",this.form_date_input.id="date",this.desc_input.name="desc",this.desc_input.id="desc",this.desc_input.value="No Description for this Task",this.desc_label.htmlFor="desc",this.name_input.id="name",this.name_input.name="name",this.name_label.htmlFor="name",this.form_date_input.name="date",this.form_date_input.type="date",this.form_date_label.htmlFor="date",this.form_priority.name="priority",this.form_priority.id="priority",this.priority_label.htmlFor="priority",this.form_low_prio.value="low",this.form_medium_prio.value="medium",this.form_high_prio.value="high",this.form_low_prio.selected=!0,this.name_input.required=!0,this.form_date_input.required=!0,this.form_cancel.textContent="X",this.form_date_label.textContent="Due-Date",this.form_submit.textContent="Confirm",this.name_label.textContent="Task Name",this.name_input.placeholder="Task Name (e.g. Wake up at 9am)",this.desc_label.textContent="Description/Note",this.desc_input.placeholder="Description",this.priority_label.textContent="Priority",this.form_low_prio.textContent="Low",this.form_medium_prio.textContent="medium",this.form_high_prio.textContent="high",this.form.classList.add("form-style"),this.form.appendChild(this.form_cancel),this.form.appendChild(this.name_label),this.form.appendChild(this.name_input),this.form.appendChild(this.form_date_label),this.form.appendChild(this.form_date_input),this.form.appendChild(this.desc_input),this.form.appendChild(this.desc_label),this.form.appendChild(this.priority_label),this.form_priority.appendChild(this.form_low_prio),this.form_priority.appendChild(this.form_medium_prio),this.form_priority.appendChild(this.form_high_prio),this.form.appendChild(this.form_priority),this.form.appendChild(this.form_submit),this.form_cancel.addEventListener("click",(()=>{this.default_project.removeChild(this.form),this.default_project.appendChild(this.add_Task_default)})),this.form.addEventListener("submit",(o=>{o.preventDefault(),this.formdata=new FormData(this.form),this.task_name=document.createElement("p"),this.task_date=document.createElement("p");let a=document.createElement("p");this.task_name.textContent=this.formdata.get("name"),this.date=this.formdata.get("date");let s=new Date(this.date);this.task_date.textContent=`Due Date: ${s.getDate()} - ${s.getMonth()+1} - ${s.getFullYear()}`,this.priority=this.formdata.get("priority"),a.textContent=this.formdata.get("desc"),this.default_project.removeChild(this.form);let r=Math.floor(100*Math.random())+50;for(;this.tasks_set.includes(r);)r=Math.floor(100*Math.random())+50;this.create_Task(e,t,a,i,this.priority,this.task_name,this.task_date,r),this.default_project.appendChild(this.add_Task_default)})),this.default_project.appendChild(this.form)}create_Task(e,t,o,i,a,s,r,d){let n=document.createElement("p"),l=document.createElement("p"),c=document.createElement("p");c=o,n.textContent=s.textContent,l.textContent=r.textContent,this.default_project=document.querySelector(`#${e}`),console.log(this.default_project);let h=document.createElement("div"),p=document.createElement("button");p.style="background-color:transparent;color:#d7c49eff;font-size:16px;border:none;",p.textContent="Details ▼",i.style="display:flex;justify-content:space-between;width:90%;",this.delete_task=document.createElement("button"),this.delete_task.textContent="Delete",this.delete_task.type="button",this.delete_task.style="align-self:center;width:80px;font-size:15px;color:#d7c49eff;background-color:#343148ff;";let m=document.createElement("input"),u=document.createElement("div");m.type="checkbox";let _=document.createElement("label");if(_.textContent="Done",m.id=`c${e}`,m.name="checkbox",_.htmlFor=m.id,u.style="align-text:center;align-self:center;",h.classList.add("task-container"),"low"===a?h.classList.add("low"):"medium"===a?h.classList.add("medium"):"high"===a&&h.classList.add("high"),u.appendChild(_),u.appendChild(m),i.appendChild(c),i.appendChild(this.delete_task),h.appendChild(n),h.appendChild(l),h.appendChild(u),h.appendChild(p),"b1"==e){let e={task_id:"b1",project_name:"default",description:c.textContent,task_name:n.textContent,task_date:l.textContent,priority:a,task_id:d},t=JSON.parse(localStorage.getItem("default_project"))||[];t.push(e),localStorage.setItem("default_project",JSON.stringify(t)),this.default_project=document.querySelector(".default")}if(!this.tasks_set.includes(d)&&"b1"!==e){this.tasks_set.push(d);let o={task_id:d,id:`${e}`,project_name:t,description:c.textContent,task_name:n.textContent,task_date:l.textContent,priority:a},i=JSON.parse(localStorage.getItem("tasks"))||[];i.push(o),localStorage.setItem("tasks",JSON.stringify(i))}this.default_project.insertBefore(h,this.default_project.querySelector(".add")),p.addEventListener("click",(()=>{h.classList.toggle("task_details"),h.classList.contains("task_details")?h.parentNode.insertBefore(i,h.nextSibling):h.parentNode.removeChild(i)})),this.delete_task.addEventListener("click",(()=>{this.delete_Task(d,h,i)}))}delete_Task(e,t,o){let i=document.createElement("form"),a=document.createElement("h3"),s=document.createElement("button"),r=document.createElement("button"),d=document.createElement("button");a.textContent="Are you sure you want to delete this task?",r.type="submit",r.textContent="Yes",s.textContent="x",s.type="button",d.type="button",d.textContent="No",i.classList.add("delete_task_form"),a.style="grid-area:message",d.style="grid-area:cancel2;align-self:center;background-color:transparent;font-size:20px;color:#d7c49eff",s.style="grid-area:cancel;align-self:center;background-color:transparent;font-size:20px;color:#d7c49eff;align-self:Start;",r.style="grid-area:accept;align-self:center;background-color:transparent;font-size:20px;color:#d7c49eff",i.appendChild(s),i.appendChild(a),i.appendChild(r),i.appendChild(d),this.body.appendChild(i),this.all_buttons=document.querySelectorAll("button"),this.delete_form_buttons=[d,s,r],this.included_buttons=Array.from(this.all_buttons).filter((e=>!this.delete_form_buttons.includes(e)));for(let e of this.included_buttons)e.disabled=!0;i.addEventListener("submit",(a=>{a.preventDefault();let s=JSON.parse(localStorage.getItem("tasks"))||[];s=s.filter((t=>t.task_id!==e)),localStorage.setItem("tasks",JSON.stringify(s)),t.parentNode&&t.parentNode.removeChild(t),o.parentNode&&o.parentNode.removeChild(o);let r=JSON.parse(localStorage.getItem("default_project"))||[];r=r.filter((t=>t.task_id!==e)),localStorage.setItem("default_project",JSON.stringify(r)),this.body.removeChild(i);for(let e of this.included_buttons)e.disabled=!1})),this.cancel_buttons=[d,s],this.cancel_buttons.forEach((e=>{e.addEventListener("click",(()=>{this.body.removeChild(i);for(let e of this.included_buttons)e.disabled=!1}))}))}},o=new class{constructor(){this.loaded=[],this.default_loaded=[]}loadtasksFromLocalStorage(e){let o=JSON.parse(localStorage.getItem("tasks"))||[],i=document.querySelector(".project_data>h3");o.forEach((o=>{if(this.loaded.includes(o.task_id)||o.id!==e.id)return;this.loaded.push(o.task_id);let a=document.createElement("p"),s=document.createElement("p"),r=document.createElement("p"),d=document.createElement("div");r.textContent=o.description,d.appendChild(r),a.textContent=o.task_name,s.textContent=o.task_date,console.log(o.id),t.create_Task(e.id,i.textContent,r,d,o.priority,a,s,o.task_id)}))}loadDefaultProject(){let e=JSON.parse(localStorage.getItem("default_project"))||[];0!==e.length&&e.forEach((e=>{if(this.default_loaded.includes(e.task_id))return;this.default_loaded.push(e.task_id);let o=document.createElement("p"),i=document.createElement("p"),a=document.createElement("p"),s=document.createElement("div");a.textContent=e.description,s.appendChild(a),o.textContent=e.task_name,i.textContent=e.task_date,console.log(e.task_id),t.create_Task("b1","default",a,s,e.priority,o,i,e.task_id)}))}};o.loadDefaultProject();let i=new class{constructor(){this.add_project=document.querySelector(".add_project"),this.projects=document.querySelector(".All_Projects"),this.body=document.querySelector("body"),this.tasks_set=[],this.loaded_set=["b1"]}form_build(){this.form=document.createElement("form"),this.project_input=document.createElement("input"),this.project_label=document.createElement("label"),this.cancel=document.createElement("button"),this.confirm=document.createElement("button"),this.project_input.name="project",this.project_input.required=!0,this.project_input.id="project",this.confirm.type="submit",this.project_label.htmlFor="project",this.confirm.type="submit",this.cancel.type="button",this.project_label.textContent="Project Name",this.project_input.placeholder="Project Name...(e.g. Portfolio Website)",this.confirm.textContent="Confirm",this.cancel.textContent="x",this.project_input.style="grid-area:input;background-color:#343148ff;color:#d7c49eff;",this.project_label.style="grid-area:label",this.confirm.style="grid-area:confirm;justify-self:end;background-color:#343148ff;color:#d7c49eff;width:75px;font-size:15px;",this.cancel.style="grid-area:cancel;justify-self:end;background-color:#343148ff;color:#d7c49eff;width:50px;font-size:20px;",this.form.appendChild(this.cancel),this.form.appendChild(this.project_label),this.form.appendChild(this.project_input),this.form.appendChild(this.confirm),this.form.classList.add("project_form"),this.projects.removeChild(this.add_project),this.projects.appendChild(this.form),this.form.addEventListener("submit",(e=>{e.preventDefault(),this.formdata=new FormData(this.form),this.name=document.createElement("h2"),this.name.textContent=this.formdata.get("project");let t=Math.floor(10*Math.random())+10;for(;this.tasks_set.includes(t);)t=Math.floor(10*Math.random())+10;this.tasks_set.push(t),this.create_Project(t,this.name.textContent),this.projects.removeChild(this.form)})),this.cancel.addEventListener("click",(()=>{this.projects.removeChild(this.form),this.projects.appendChild(this.add_project)}))}create_Project(e,o){let i=JSON.parse(localStorage.getItem("projects"))||[];i.push({id:e,name:o}),localStorage.setItem("projects",JSON.stringify(i));let a=document.createElement("button"),s=document.createElement("button");s.textContent="Remove Project";let r=document.createElement("h3");r.style="font-size:20px;",r.textContent=`Project: ${o} id: b${e}`,a.classList.add("add");let d=document.createElement("div"),n=document.createElement("div");n.appendChild(r),n.appendChild(s),d.appendChild(n),d.appendChild(a),d.id=`b${e}`,this.projects.appendChild(d),this.projects.appendChild(this.add_project),d.classList.add("project_container"),n.classList.add("project_data"),a.textContent="Add Task +",a.style="opacity:0.6;font-size: 20px;border:1px solid grey;border-radius:10px;align-self:start;",s.style="opacity:0.6;font-size: 20px;border:1px solid grey;border-radius:10px;",a.addEventListener("click",(()=>{t.task_builder(`b${e}`,o,a.parentNode)})),s.addEventListener("click",(()=>{this.delete_project(e,d)}))}delete_project(e,t){this.delete_form=document.createElement("form"),this.message=document.createElement("h3"),this.cancel_delete=document.createElement("button"),this.accept_delete=document.createElement("button"),this.cancel2_delete=document.createElement("button"),this.message.textContent="Are you sure you want to delete this Project?",this.accept_delete.type="submit",this.accept_delete.textContent="Yes",this.cancel_delete.textContent="x",this.cancel_delete.type="button",this.cancel2_delete.type="button",this.cancel2_delete.textContent="No",this.delete_form.classList.add("delete_task_form"),this.message.style="grid-area:message",this.cancel2_delete.style="grid-area:cancel2;align-self:center;background-color:transparent;font-size:20px;color:#d7c49eff",this.cancel_delete.style="grid-area:cancel;align-self:center;background-color:transparent;font-size:20px;color:#d7c49eff;align-self:Start;",this.accept_delete.style="grid-area:accept;align-self:center;background-color:transparent;font-size:20px;color:#d7c49eff",document.querySelector(`b${e}`);let o=JSON.parse(localStorage.getItem("projects"))||[];o=o.filter((t=>t.id!==e)),localStorage.setItem("projects",JSON.stringify(o)),this.delete_form.appendChild(this.cancel_delete),this.delete_form.appendChild(this.message),this.delete_form.appendChild(this.accept_delete),this.delete_form.appendChild(this.cancel2_delete),this.body.appendChild(this.delete_form),this.delete_form.addEventListener("submit",(e=>{for(e.preventDefault();t.firstChild;)t.removeChild(t.firstChild);t.remove(),this.body.removeChild(this.delete_form)}))}loadProjects(){let e=JSON.parse(localStorage.getItem("projects"))||[];document.querySelector(".All_Projects"),e.forEach((e=>{if(!this.loaded_set.includes(e.id)&&"b1"!==e.id&&"Default"!==e.name){console.log(e.id),this.loaded_set.push(e.id),"b1"!==e.id&&"Default"!==e.name&&this.create_Project(e.id,e.name);let t=document.querySelector(`#b${e.id}`);o.loadtasksFromLocalStorage(t)}}))}};i.loadProjects(),new class{constructor(){this.clicked=0,this.project_clicked=!1,this.body=document.querySelector(".body"),this.button=document.querySelector(".collapse-dashboard"),this.home_button=document.querySelector(".today"),this.my_projects=document.querySelector(".project"),this.title=document.querySelector(".title"),this.default_tasks=document.querySelector(".default"),this.add_task=document.querySelector(".add"),this.add_project=document.querySelector(".add_project"),this.projects_container=document.querySelector(".projects_container"),this.button.addEventListener("click",(()=>{this.clicked%2==0?(e.dashboard_collapse(),this.clicked++):(e.dashboard_expand(),this.clicked++)})),this.add_task.addEventListener("click",(()=>{t.task_builder("b1","default",this.add_task.parentNode)})),this.add_project.addEventListener("click",(()=>{i.form_build()})),this.my_projects.addEventListener("click",(()=>{!1===this.project_clicked&&(this.title.textContent="Projects",this.body.removeChild(this.default_tasks),this.project_clicked=!0)})),this.home_button.addEventListener("click",(()=>{!0===this.project_clicked&&(this.body.insertBefore(this.default_tasks,this.projects_container),this.title.textContent="To-Do List",this.project_clicked=!1)}))}}})();